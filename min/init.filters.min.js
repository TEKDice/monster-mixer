function loadFilters(){if(!Data.hasVar("filters")){return}var a=Data.getVar("filters");$.each(a,function(b,c){_addNewFilter(c)})}function addNewFilter(){var b=$("#filters").val();var c={name:b};if(filterData[b] instanceof Array){c.value=$("#joinSelect").val()}else{if(filterData[b]){var a=$("#numberInput").val();if(a==0){return}c.value=$("#numberInput").val();c.sign=$("#signChooser").val()}else{c.value=$("#autocompleteName").val()}}if(_addNewFilter(c)){_trackFilter(c,true)}}function _addNewFilter(c){var d=c.name;var i=_cleanName(c.name);var l=$("#"+i+"_filters");if(l.length){var g=false;$("."+i+"-filter").each(function(){if($(this).attr("data-sign")==c.sign&&$(this).attr("data-value")==c.value){$(this).animate({boxShadow:"0 0 15px #f00"},1000,function(){$(this).animate({boxShadow:"none"})});g=true;return}});if(g){return false}var h=$("<span/>",{text:getFilterText(c)+" "}).attr("data-value",c.value).attr("data-sign",c.sign).addClass("badge").addClass("badge-info").addClass(i+"-filter");var a=$("<sup/>",{text:"[x]"}).addClass("filter-remover");h.appendTo(l);a.appendTo(h)}else{var f=$("<tr/>",{}).attr("data-attr",c.name);var k=$("<td/>",{});var e=$("<span/>",{text:c.name}).addClass("label filter-label");f.appendTo("#filterTable");k.appendTo(f);e.appendTo(k);var b=$("<td/>",{});var j=$("<div/>",{id:i+"_filters"}).attr("data-attr",c.name).addClass("inner-filter-container");var h=$("<span/>",{text:getFilterText(c)+" "}).attr("data-value",c.value).attr("data-sign",c.sign).addClass("badge badge-info "+i+"-filter");var a=$("<sup/>",{text:"[x]"}).addClass("filter-remover");b.appendTo(f);j.appendTo(b);h.appendTo(j);a.appendTo(h)}makeSpansRemovable();return true}function _trackFilter(a,d){if(!Data.hasVar("filters")){Data.setVar("filters",[])}var b=Data.getVar("filters");var c=false;$.each(b,function(f,g){if(!g){return}if(a.name==g.name&&a.sign==g.sign&&a.value==g.value){if(!d){b.splice(f,1)}else{c=true}}});if(!c&&d){b.push(a)}Data.setVar("filters",b)}function makeSpansRemovable(){$(".filter-remover").click(function(){$(this).parent().fadeOut(function(){var a=$(this).siblings().size();if(a==0){$(this).closest("tr").remove()}_trackFilter({name:$(this).closest("[data-attr]").attr("data-attr"),value:$(this).closest("[data-value]").attr("data-value"),sign:$(this).closest("[data-sign]").attr("data-sign")},false);$(this).remove()})})}function getFilterText(a){if(a.hasOwnProperty("sign")){return a.sign+a.value}return a.value}function initializeAutocomplete(){$("#autocompleteName").autocomplete({source:autocompleteList,minLength:2,select:function(a,b){$("#autocompleteName").val(b.item.label);addNewFilter();$("#autocompleteName").val("");return false}})}function initializeFilterSelect(){for(var a in filterData){$("#filters").append("<option value='"+a+"'>"+a+"</option>")}$("#filters").change(function(){$(".joinOpt, .numericOpt, .nameOpt").hide();$("#numberInput, #autocompleteName").val("");$("#joinSelect").empty();if(filterData[$(this).val()] instanceof Array){$(".joinOpt").fadeIn();var b=filterData[$(this).val()];for(var c in b){$("#joinSelect").append("<option value='"+b[c]+"'>"+b[c]+"</option>")}}else{if(filterData[$(this).val()]){$(".numericOpt").fadeIn()}else{$(".nameOpt").fadeIn()}}})};