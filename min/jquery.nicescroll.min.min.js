(function(h){var y=false,k=false,g=5000,e=2000,b=function(){var q=document.getElementsByTagName("script"),q=q[q.length-1].src.split("?")[0];return q.split("/").length>0?q.split("/").slice(0,-1).join("/")+"/":""}(),f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||false,c=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||false,j=false,p=function(){if(j){return j}var u=document.createElement("DIV"),v={haspointerlock:"pointerLockElement" in document||"mozPointerLockElement" in document||"webkitPointerLockElement" in document};v.isopera="opera" in window;v.isopera12=v.isopera&&"getUserMedia" in navigator;v.isie="all" in document&&"attachEvent" in u&&!v.isopera;v.isieold=v.isie&&!("msInterpolationMode" in u.style);v.isie7=v.isie&&!v.isieold&&(!("documentMode" in document)||document.documentMode==7);v.isie8=v.isie&&"documentMode" in document&&document.documentMode==8;v.isie9=v.isie&&"performance" in window&&document.documentMode>=9;v.isie10=v.isie&&"performance" in window&&document.documentMode>=10;v.isie9mobile=/iemobile.9/i.test(navigator.userAgent);if(v.isie9mobile){v.isie9=false}v.isie7mobile=!v.isie9mobile&&v.isie7&&/iemobile/i.test(navigator.userAgent);v.ismozilla="MozAppearance" in u.style;v.iswebkit="WebkitAppearance" in u.style;v.ischrome="chrome" in window;v.ischrome22=v.ischrome&&v.haspointerlock;v.cantouch="ontouchstart" in document.documentElement;v.hasmstouch=window.navigator.msPointerEnabled||false;v.ismac=/^mac$/i.test(navigator.platform);v.isios=v.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform);v.isios4=v.isios&&!("seal" in Object);v.isandroid=/android/i.test(navigator.userAgent);v.trstyle=false;v.hastransform=false;v.hastranslate3d=false;v.transitionstyle=false;v.hastransition=false;v.transitionend=false;for(var s=["transform","msTransform","webkitTransform","MozTransform","OTransform"],r=0;r<s.length;r++){if(typeof u.style[s[r]]!="undefined"){v.trstyle=s[r];break}}v.hastransform=v.trstyle!=false;if(v.hastransform){u.style[v.trstyle]="translate3d(1px,2px,3px)",v.hastranslate3d=/translate3d/.test(u.style[v.trstyle])}v.transitionstyle=false;v.prefixstyle="";v.transitionend=false;for(var s="transition,webkitTransition,MozTransition,OTransition,OTransition,msTransition,KhtmlTransition".split(","),q=",-webkit-,-moz-,-o-,-o,-ms-,-khtml-".split(","),t="transitionend,webkitTransitionEnd,transitionend,otransitionend,oTransitionEnd,msTransitionEnd,KhtmlTransitionEnd".split(","),r=0;r<s.length;r++){if(s[r] in u.style){v.transitionstyle=s[r];v.prefixstyle=q[r];v.transitionend=t[r];break}}v.hastransition=v.transitionstyle;a:{s=["-moz-grab","-webkit-grab","grab"];if(v.ischrome&&!v.ischrome22||v.isie){s=[]}for(r=0;r<s.length;r++){if(q=s[r],u.style.cursor=q,u.style.cursor==q){s=q;break a}}s="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}v.cursorgrabvalue=s;v.hasmousecapture="setCapture" in u;return j=v},o=function(s,w){function u(A,B,z){B=A.css(B);A=parseFloat(B);return isNaN(A)?(A=d[B]||0,z=A==3?z?x.win.outerHeight()-x.win.innerHeight():x.win.outerWidth()-x.win.innerWidth():1,x.isie8&&A&&(A+=1),z?A:0):A}function t(A,D){var z=0,B=0;if("wheelDeltaY" in A){z=Math.floor(A.wheelDeltaX/2),B=Math.floor(A.wheelDeltaY/2)}else{var C=A.detail?A.detail*-1:A.wheelDelta/40;C&&(D?z=Math.floor(C*x.opt.mousescrollstep):B=Math.floor(C*x.opt.mousescrollstep))}z&&(x.scrollmom&&x.scrollmom.stop(),x.lastdeltax+=z,x.synched("mousewheelx",function(){var E=x.lastdeltax;x.lastdeltax=0;x.rail.drag||x.doScrollLeftBy(E)}));B&&(x.scrollmom&&x.scrollmom.stop(),x.lastdeltay+=B,x.synched("mousewheely",function(){var E=x.lastdeltay;x.lastdeltay=0;x.rail.drag||x.doScrollBy(E)}))}var x=this;this.version="3.0.0";this.name="nicescroll";this.me=w;this.opt={doc:h("body"),win:false,zindex:9000,cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:false,hwacceleration:true,usetransition:true,boxzoom:false,dblclickzoom:true,gesturezoom:true,grabcursorenabled:true,autohidemode:true,background:"",iframeautoresize:true,cursorminheight:32,preservenativescrolling:true,railoffset:false,bouncescroll:true,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true,horizrailenabled:true,railalign:"right",railvalign:"bottom",enabletranslate3d:true,enablemousewheel:true,enablekeyboard:true,smoothscroll:true,sensitiverail:true};this.opt.snapbackspeed=80;if(s){for(var q in x.opt){typeof s[q]!="undefined"&&(x.opt[q]=s[q])}}this.iddoc=(this.doc=x.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/BODY|HTML/.test(x.opt.win?x.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=x.opt.win!==false;this.win=x.opt.win||(this.ispage?h(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?h(window):this.win;this.body=h("body");this.iframe=this.isfixed=false;this.isiframe=this.doc[0].nodeName=="IFRAME"&&this.win[0].nodeName=="IFRAME";this.istextarea=this.win[0].nodeName=="TEXTAREA";this.forcescreen=false;this.canshowonmouseevent=x.opt.autohidemode!="scroll";this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=false;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.observer=this.scrollmom=this.scrollrunning=false;do{this.id="ascrail"+e++}while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.cursorfreezed=this.cursor=this.rail=false;this.visibility=true;this.hidden=this.locked=false;this.cursoractive=true;this.nativescrollingarea=false;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;var v=this.detected=p();this.ishwscroll=(this.canhwscroll=v.hastransform&&x.opt.hwacceleration)&&x.haswrapper;this.istouchcapable=false;if(v.cantouch&&v.ischrome&&!v.isios&&!v.isandroid){this.istouchcapable=true,v.cantouch=false}if(v.cantouch&&v.ismozilla&&!v.isios){this.istouchcapable=true,v.cantouch=false}this.delayed=function(B,E,A,C){var D=x.delaylist[B],z=(new Date).getTime();if(!C&&D&&D.tt){return false}D&&D.tt&&clearTimeout(D.tt);if(D&&D.last+A>z&&!D.tt){x.delaylist[B]={last:z+A,tt:setTimeout(function(){x.delaylist[B].tt=0;E.call()},A)}}else{if(!D||!D.tt){x.delaylist[B]={last:z,tt:0},setTimeout(function(){E.call()},0)}}};this.synched=function(z,A){x.synclist[z]=A;(function(){if(!x.onsync){f(function(){x.onsync=false;for(z in x.synclist){var B=x.synclist[z];B&&B.call(x);x.synclist[z]=false}}),x.onsync=true}})();return z};this.unsynched=function(z){x.synclist[z]&&(x.synclist[z]=false)};this.css=function(A,B){for(var z in B){x.saved.css.push([A,z,A.css(z)]),A.css(z,B[z])}};this.scrollTop=function(z){return typeof z=="undefined"?x.getScrollTop():x.setScrollTop(z)};this.scrollLeft=function(z){return typeof z=="undefined"?x.getScrollLeft():x.setScrollLeft(z)};BezierClass=function(z,F,C,D,E,B,A){this.st=z;this.ed=F;this.spd=C;this.p1=D||0;this.p2=E||1;this.p3=B||0;this.p4=A||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};BezierClass.prototype={B2:function(z){return 3*z*z*(1-z)},B3:function(z){return 3*z*(1-z)*(1-z)},B4:function(z){return(1-z)*(1-z)*(1-z)},getNow:function(){var z=1-((new Date).getTime()-this.ts)/this.spd,A=this.B2(z)+this.B3(z)+this.B4(z);return z<0?this.ed:this.st+Math.round(this.df*A)},update:function(z,A){this.st=this.getNow();this.ed=z;this.spd=A;this.ts=(new Date).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};v.hastranslate3d&&v.isios&&this.doc.css("-webkit-backface-visibility","hidden");var r=function(){var z=x.doc.css(v.trstyle);return z&&z.substr(0,6)=="matrix"?z.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):false};this.getScrollTop=function(z){if(!z){if(z=r()){return z.length==16?-z[13]:-z[5]}if(x.timerscroll&&x.timerscroll.bz){return x.timerscroll.bz.getNow()}}return x.doc.translate.y};this.getScrollLeft=function(z){if(!z){if(z=r()){return z.length==16?-z[12]:-z[4]}if(x.timerscroll&&x.timerscroll.bh){return x.timerscroll.bh.getNow()}}return x.doc.translate.x};this.notifyScrollEvent=document.createEvent?function(z){var A=document.createEvent("UIEvents");A.initUIEvent("scroll",false,true,window,1);z.dispatchEvent(A)}:document.fireEvent?function(z){var A=document.createEventObject();z.fireEvent("onscroll");A.cancelBubble=true}:function(){};v.hastranslate3d&&x.opt.enabletranslate3d?(this.setScrollTop=function(z,A){x.doc.translate.y=z;x.doc.translate.ty=z*-1+"px";x.doc.css(v.trstyle,"translate3d("+x.doc.translate.tx+","+x.doc.translate.ty+",0px)");A||x.notifyScrollEvent(x.win[0])},this.setScrollLeft=function(z,A){x.doc.translate.x=z;x.doc.translate.tx=z*-1+"px";x.doc.css(v.trstyle,"translate3d("+x.doc.translate.tx+","+x.doc.translate.ty+",0px)");A||x.notifyScrollEvent(x.win[0])}):(this.setScrollTop=function(z,A){x.doc.translate.y=z;x.doc.translate.ty=z*-1+"px";x.doc.css(v.trstyle,"translate("+x.doc.translate.tx+","+x.doc.translate.ty+")");A||x.notifyScrollEvent(x.win[0])},this.setScrollLeft=function(z,A){x.doc.translate.x=z;x.doc.translate.tx=z*-1+"px";x.doc.css(v.trstyle,"translate("+x.doc.translate.tx+","+x.doc.translate.ty+")");A||x.notifyScrollEvent(x.win[0])})}else{this.getScrollTop=function(){return x.docscroll.scrollTop()},this.setScrollTop=function(z){return x.docscroll.scrollTop(z)},this.getScrollLeft=function(){return x.docscroll.scrollLeft()},this.setScrollLeft=function(z){return x.docscroll.scrollLeft(z)}}this.getTarget=function(z){return !z?false:z.target?z.target:z.srcElement?z.srcElement:false};this.hasParent=function(z,B){if(!z){return false}for(var A=z.target||z.srcElement||z||false;A&&A.id!=B;){A=A.parentNode||false}return A!==false};var d={thin:1,medium:3,thick:5};this.updateScrollBar=function(A){if(x.ishwscroll){x.rail.css({height:x.win.innerHeight()}),x.railh&&x.railh.css({width:x.win.innerWidth()})}else{var D=x.isfixed?{top:parseFloat(x.win.css("top")),left:parseFloat(x.win.css("left"))}:x.win.offset(),z=D.top,B=D.left;z+=u(x.win,"border-top-width",true);x.win.outerWidth();x.win.innerWidth();B+=x.rail.align?x.win.outerWidth()-u(x.win,"border-right-width")-x.rail.width:u(x.win,"border-left-width");var C=x.opt.railoffset;C&&(C.top&&(z+=C.top),x.rail.align&&C.left&&(B+=C.left));x.locked||x.rail.css({top:z,left:B,height:A?A.h:x.win.innerHeight()});x.zoom&&x.zoom.css({top:z+1,left:x.rail.align==1?B-20:B+x.rail.width+4});if(x.railh&&!x.locked){z=D.top,B=D.left,A=x.railh.align?z+u(x.win,"border-top-width",true)+x.win.innerHeight()-x.railh.height:z+u(x.win,"border-top-width",true),B+=u(x.win,"border-left-width"),x.railh.css({top:A,left:B,width:x.railh.width})}}};this.doRailClick=function(A,C,z){var B;!(x.rail.drag&&x.rail.drag.pt!=1)&&!x.locked&&!x.rail.drag&&(x.cancelScroll(),x.cancelEvent(A),C?(C=z?x.doScrollLeft:x.doScrollTop,B=z?(A.pageX-x.railh.offset().left-x.cursorwidth/2)*x.scrollratio.x:(A.pageY-x.rail.offset().top-x.cursorheight/2)*x.scrollratio.y,C(B)):(C=z?x.doScrollLeftBy:x.doScrollBy,B=z?x.scroll.x:x.scroll.y,A=z?A.pageX-x.railh.offset().left:A.pageY-x.rail.offset().top,z=z?x.view.w:x.view.h,B>=A?C(z):C(-z)))};x.hasanimationframe=f;x.hascancelanimationframe=c;x.hasanimationframe?x.hascancelanimationframe||(c=function(){x.cancelAnimationFrame=true}):(f=function(z){return setTimeout(z,16)},c=clearInterval);this.init=function(){x.saved.css=[];if(v.isie7mobile){return true}v.hasmstouch&&x.css(x.ispage?h("html"):x.win,{"-ms-touch-action":"none"});if(!x.ispage||!v.cantouch&&!v.isieold&&!v.isie9mobile){var I=x.docscroll;x.ispage&&(I=x.haswrapper?x.win:x.doc);v.isie9mobile||x.css(I,{"overflow-y":"hidden"});x.ispage&&v.isie7&&(x.doc[0].nodeName=="BODY"?x.css(h("html"),{"overflow-y":"hidden"}):x.doc[0].nodeName=="HTML"&&x.css(h("body"),{"overflow-y":"hidden"}));v.isios&&!x.ispage&&!x.haswrapper&&x.css(h("body"),{"-webkit-overflow-scrolling":"touch"});var J=h(document.createElement("div"));J.css({position:"relative",top:0,"float":"right",width:x.opt.cursorwidth,height:"0px","background-color":x.opt.cursorcolor,border:x.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":x.opt.cursorborderradius,"-moz-border-radius":x.opt.cursorborderradius,"border-radius":x.opt.cursorborderradius});J.hborder=parseFloat(J.outerHeight()-J.innerHeight());x.cursor=J;var H=h(document.createElement("div"));H.attr("id",x.id);var G,F,E=["left","right"],K;for(K in E){F=E[K],(G=x.opt.railpadding[F])?H.css("padding-"+F,G+"px"):x.opt.railpadding[F]=0}H.append(J);H.width=Math.max(parseFloat(x.opt.cursorwidth),J.outerWidth())+x.opt.railpadding.left+x.opt.railpadding.right;H.css({width:H.width+"px",zIndex:x.ispage?x.opt.zindex:x.opt.zindex+2,background:x.opt.background});H.visibility=true;H.scrollable=true;H.align=x.opt.railalign=="left"?0:1;x.rail=H;J=x.rail.drag=false;if(x.opt.boxzoom&&!x.ispage&&!v.isieold&&(J=document.createElement("div"),x.bind(J,"click",x.doZoom),x.zoom=h(J),x.zoom.css({cursor:"pointer","z-index":x.opt.zindex,backgroundImage:"url("+b+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),x.opt.dblclickzoom&&x.bind(x.win,"dblclick",x.doZoom),v.cantouch&&x.opt.gesturezoom)){x.ongesturezoom=function(A){A.scale>1.5&&x.doZoomIn(A);A.scale<0.8&&x.doZoomOut(A);return x.cancelEvent(A)},x.bind(x.win,"gestureend",x.ongesturezoom)}x.railh=false;if(x.opt.horizrailenabled){x.css(I,{"overflow-x":"hidden"});J=h(document.createElement("div"));J.css({position:"relative",top:0,height:x.opt.cursorwidth,width:"0px","background-color":x.opt.cursorcolor,border:x.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":x.opt.cursorborderradius,"-moz-border-radius":x.opt.cursorborderradius,"border-radius":x.opt.cursorborderradius});J.wborder=parseFloat(J.outerWidth()-J.innerWidth());x.cursorh=J;var D=h(document.createElement("div"));D.attr("id",x.id+"-hr");D.height=1+Math.max(parseFloat(x.opt.cursorwidth),J.outerHeight());D.css({height:D.height+"px",zIndex:x.ispage?x.opt.zindex:x.opt.zindex+2,background:x.opt.background});D.append(J);D.visibility=true;D.scrollable=true;D.align=x.opt.railvalign=="top"?0:1;x.railh=D;x.railh.drag=false}x.ispage?(H.css({position:"fixed",top:"0px",height:"100%"}),H.align?H.css({right:"0px"}):H.css({left:"0px"}),x.body.append(H),x.railh&&(D.css({position:"fixed",left:"0px",width:"100%"}),D.align?D.css({bottom:"0px"}):D.css({top:"0px"}),x.body.append(D))):(x.ishwscroll?(x.win.css("position")=="static"&&x.css(x.win,{position:"relative"}),I=x.win[0].nodeName=="HTML"?x.body:x.win,x.zoom&&(x.zoom.css({position:"absolute",top:1,right:0,"margin-right":H.width+4}),I.append(x.zoom)),H.css({position:"absolute",top:0}),H.align?H.css({right:0}):H.css({left:0}),I.append(H),D&&(D.css({position:"absolute",left:0,bottom:0}),D.align?D.css({bottom:0}):D.css({top:0}),I.append(D))):(x.isfixed=x.win.css("position")=="fixed",I=x.isfixed?"fixed":"absolute",H.css({position:I}),x.zoom&&x.zoom.css({position:I}),x.updateScrollBar(),x.body.append(H),x.zoom&&x.body.append(x.zoom),x.railh&&(D.css({position:I}),x.body.append(D))),v.isios&&x.css(x.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),v.isie&&x.opt.disableoutline&&x.win.attr("hideFocus","true"),v.iswebkit&&x.opt.disableoutline&&x.win.css({outline:"none"}));if(x.opt.autohidemode===false){x.autohidedom=false}else{if(x.opt.autohidemode===true){if(x.autohidedom=h().add(x.rail),x.railh){x.autohidedom=x.autohidedom.add(x.railh)}}else{if(x.opt.autohidemode=="scroll"){if(x.autohidedom=h().add(x.rail),x.railh){x.autohidedom=x.autohidedom.add(x.railh)}}else{if(x.opt.autohidemode=="cursor"){if(x.autohidedom=h().add(x.cursor),x.railh){x.autohidedom=x.autohidedom.add(x.railh.cursor)}}else{if(x.opt.autohidemode=="hidden"){x.autohidedom=false,x.hide(),x.locked=false}}}}}if(v.isie9mobile){x.scrollmom=new i(x),x.onmangotouch=function(){var Q=x.getScrollTop(),N=x.getScrollLeft();if(Q==x.scrollmom.lastscrolly&&N==x.scrollmom.lastscrollx){return true}var M=Q-x.mangotouch.sy,O=N-x.mangotouch.sx;if(Math.round(Math.sqrt(Math.pow(O,2)+Math.pow(M,2)))!=0){var A=M<0?-1:1,P=O<0?-1:1,L=+new Date;x.mangotouch.lazy&&clearTimeout(x.mangotouch.lazy);if(L-x.mangotouch.tm>80||x.mangotouch.dry!=A||x.mangotouch.drx!=P){x.scrollmom.stop(),x.scrollmom.reset(N,Q),x.mangotouch.sy=Q,x.mangotouch.ly=Q,x.mangotouch.sx=N,x.mangotouch.lx=N,x.mangotouch.dry=A,x.mangotouch.drx=P,x.mangotouch.tm=L}else{if(x.scrollmom.stop(),x.scrollmom.update(x.mangotouch.sx-O,x.mangotouch.sy-M),x.mangotouch.tm=L,M=Math.max(Math.abs(x.mangotouch.ly-Q),Math.abs(x.mangotouch.lx-N)),x.mangotouch.ly=Q,x.mangotouch.lx=N,M>2){x.mangotouch.lazy=setTimeout(function(){x.mangotouch.lazy=false;x.mangotouch.dry=0;x.mangotouch.drx=0;x.mangotouch.tm=0;x.scrollmom.doMomentum(30)},100)}}}},H=x.getScrollTop(),D=x.getScrollLeft(),x.mangotouch={sy:H,ly:H,dry:0,sx:D,lx:D,drx:0,lazy:false,tm:0},x.bind(x.docscroll,"scroll",x.onmangotouch)}else{if(v.cantouch||x.istouchcapable||x.opt.touchbehavior||v.hasmstouch){x.scrollmom=new i(x);x.ontouchstart=function(M){if(M.pointerType&&M.pointerType!=2){return false}if(!x.locked){if(v.hasmstouch){for(var L=M.target?M.target:false;L;){var A=h(L).getNiceScroll();if(A.length>0&&A[0].me==x.me){break}if(A.length>0){return false}if(L.nodeName=="DIV"&&L.id==x.id){break}L=L.parentNode?L.parentNode:false}}x.cancelScroll();if((L=x.getTarget(M))&&/INPUT/i.test(L.nodeName)&&/range/i.test(L.type)){return x.stopPropagation(M)}if(x.forcescreen){A=M,M={original:M.original?M.original:M},M.clientX=A.screenX,M.clientY=A.screenY}x.rail.drag={x:M.clientX,y:M.clientY,sx:x.scroll.x,sy:x.scroll.y,st:x.getScrollTop(),sl:x.getScrollLeft(),pt:2};x.opt.touchbehavior&&x.isiframe&&v.isie&&(A=x.win.position(),x.rail.drag.x+=A.left,x.rail.drag.y+=A.top);x.hasmoving=false;x.lastmouseup=false;x.scrollmom.reset(M.clientX,M.clientY);if(!v.cantouch&&!this.istouchcapable&&!v.hasmstouch){if(!L||!/INPUT|SELECT|TEXTAREA/i.test(L.nodeName)){return !x.ispage&&v.hasmousecapture&&L.setCapture(),x.cancelEvent(M)}if(/SUBMIT|CANCEL|BUTTON/i.test(h(L).attr("type"))){pc={tg:L,click:false},x.preventclick=pc}}}};x.ontouchend=function(A){if(A.pointerType&&A.pointerType!=2){return false}if(x.rail.drag&&x.rail.drag.pt==2&&(x.scrollmom.doMomentum(),x.rail.drag=false,x.hasmoving&&(x.hasmoving=false,x.lastmouseup=true,x.hideCursor(),v.hasmousecapture&&document.releaseCapture(),!v.cantouch))){return x.cancelEvent(A)}};var B=x.opt.touchbehavior&&x.isiframe&&!v.hasmousecapture;x.ontouchmove=function(R,P){if(R.pointerType&&R.pointerType!=2){return false}if(x.rail.drag&&x.rail.drag.pt==2){if(v.cantouch&&typeof R.original=="undefined"){return true}x.hasmoving=true;if(x.preventclick&&!x.preventclick.click){x.preventclick.click=x.preventclick.tg.onclick||false,x.preventclick.tg.onclick=x.onpreventclick}if(x.forcescreen){var O=R,R={original:R.original?R.original:R};R.clientX=O.screenX;R.clientY=O.screenY}O=ofy=0;if(B&&!P){var L=x.win.position(),O=-L.left;ofy=-L.top}var Q=R.clientY+ofy,N=x.rail.drag.st-(Q-x.rail.drag.y);if(x.ishwscroll&&x.opt.bouncescroll){N<0?N=Math.round(N/2):N>x.page.maxh&&(N=x.page.maxh+Math.round((N-x.page.maxh)/2))}else{if(N<0&&(Q=N=0),N>x.page.maxh){N=x.page.maxh,Q=0}}var M=R.clientX+O;if(x.railh&&x.railh.scrollable){var A=x.rail.drag.sl-(M-x.rail.drag.x);if(x.ishwscroll&&x.opt.bouncescroll){A<0?A=Math.round(A/2):A>x.page.maxw&&(A=x.page.maxw+Math.round((A-x.page.maxw)/2))}else{if(A<0&&(M=A=0),A>x.page.maxw){A=x.page.maxw,M=0}}}x.synched("touchmove",function(){x.rail.drag&&x.rail.drag.pt==2&&(x.prepareTransition&&x.prepareTransition(0),x.rail.scrollable&&x.setScrollTop(N),x.scrollmom.update(M,Q),x.railh&&x.railh.scrollable?(x.setScrollLeft(A),x.showCursor(N,A)):x.showCursor(N),v.isie10&&document.selection.clear())});return x.cancelEvent(R)}}}v.cantouch||x.opt.touchbehavior?(x.onpreventclick=function(A){if(x.preventclick){return x.preventclick.tg.onclick=x.preventclick.click,x.preventclick=false,x.cancelEvent(A)}},x.onmousedown=x.ontouchstart,x.onmouseup=x.ontouchend,x.onclick=v.isios?false:function(A){return x.lastmouseup?(x.lastmouseup=false,x.cancelEvent(A)):true},x.onmousemove=x.ontouchmove,v.cursorgrabvalue&&(x.css(x.ispage?x.doc:x.win,{cursor:v.cursorgrabvalue}),x.css(x.rail,{cursor:v.cursorgrabvalue}))):(x.onmousedown=function(M,L){if(!(x.rail.drag&&x.rail.drag.pt!=1)){if(x.locked){return x.cancelEvent(M)}x.cancelScroll();x.rail.drag={x:M.clientX,y:M.clientY,sx:x.scroll.x,sy:x.scroll.y,pt:1,hr:!!L};var A=x.getTarget(M);!x.ispage&&v.hasmousecapture&&A.setCapture();if(x.isiframe&&!v.hasmousecapture){x.saved.csspointerevents=x.doc.css("pointer-events"),x.css(x.doc,{"pointer-events":"none"})}return x.cancelEvent(M)}},x.onmouseup=function(A){if(x.rail.drag&&(v.hasmousecapture&&document.releaseCapture(),x.isiframe&&!v.hasmousecapture&&x.doc.css("pointer-events",x.saved.csspointerevents),x.rail.drag.pt==1)){return x.rail.drag=false,x.cancelEvent(A)}},x.onmousemove=function(L){if(x.rail.drag){if(x.rail.drag.pt==1){if(v.ischrome&&L.which==0){return x.onmouseup(L)}x.cursorfreezed=true;if(x.rail.drag.hr){x.scroll.x=x.rail.drag.sx+(L.clientX-x.rail.drag.x);if(x.scroll.x<0){x.scroll.x=0}var A=x.scrollvaluemaxw;if(x.scroll.x>A){x.scroll.x=A}}else{x.scroll.y=x.rail.drag.sy+(L.clientY-x.rail.drag.y);if(x.scroll.y<0){x.scroll.y=0}A=x.scrollvaluemax;if(x.scroll.y>A){x.scroll.y=A}}x.synched("mousemove",function(){x.rail.drag&&x.rail.drag.pt==1&&(x.showCursor(),x.rail.drag.hr?x.doScrollLeft(Math.round(x.scroll.x*x.scrollratio.x)):x.doScrollTop(Math.round(x.scroll.y*x.scrollratio.y)))});return x.cancelEvent(L)}}else{x.checkarea=true}});(v.cantouch||x.opt.touchbehavior)&&x.bind(x.win,"mousedown",x.onmousedown);v.hasmstouch&&(x.css(x.rail,{"-ms-touch-action":"none"}),x.css(x.cursor,{"-ms-touch-action":"none"}),x.bind(x.win,"MSPointerDown",x.ontouchstart),x.bind(document,"MSPointerUp",x.ontouchend),x.bind(document,"MSPointerMove",x.ontouchmove),x.bind(x.cursor,"MSGestureHold",function(A){A.preventDefault()}),x.bind(x.cursor,"contextmenu",function(A){A.preventDefault()}));this.istouchcapable&&(x.bind(x.win,"touchstart",x.ontouchstart),x.bind(document,"touchend",x.ontouchend),x.bind(document,"touchmove",x.ontouchmove));x.bind(x.cursor,"mousedown",x.onmousedown);x.bind(x.cursor,"mouseup",x.onmouseup);x.railh&&(x.bind(x.cursorh,"mousedown",function(A){x.onmousedown(A,true)}),x.bind(x.cursorh,"mouseup",function(A){if(!(x.rail.drag&&x.rail.drag.pt==2)){return x.rail.drag=false,x.hasmoving=false,x.hideCursor(),v.hasmousecapture&&document.releaseCapture(),x.cancelEvent(A)}}));x.bind(document,"mouseup",x.onmouseup);v.hasmousecapture&&x.bind(x.win,"mouseup",x.onmouseup);x.bind(document,"mousemove",x.onmousemove);x.onclick&&x.bind(document,"click",x.onclick);!v.cantouch&&!x.opt.touchbehavior&&(x.rail.mouseenter(function(){x.canshowonmouseevent&&x.showCursor();x.rail.active=true}),x.rail.mouseleave(function(){x.rail.active=false;x.rail.drag||x.hideCursor()}),x.opt.sensitiverail&&(x.rail.click(function(A){x.doRailClick(A,false,false)}),x.rail.dblclick(function(A){x.doRailClick(A,true,false)}),x.cursor.click(function(A){x.cancelEvent(A)}),x.cursor.dblclick(function(A){x.cancelEvent(A)})),x.railh&&(x.railh.mouseenter(function(){x.canshowonmouseevent&&x.showCursor();x.rail.active=true}),x.railh.mouseleave(function(){x.rail.active=false;x.rail.drag||x.hideCursor()})),x.zoom&&(x.zoom.mouseenter(function(){x.canshowonmouseevent&&x.showCursor();x.rail.active=true}),x.zoom.mouseleave(function(){x.rail.active=false;x.rail.drag||x.hideCursor()})));x.opt.enablemousewheel&&(x.isiframe||x.bind(v.isie&&x.ispage?document:x.docscroll,"mousewheel",x.onmousewheel),x.bind(x.rail,"mousewheel",x.onmousewheel),x.railh&&x.bind(x.railh,"mousewheel",x.onmousewheelhr));!x.ispage&&!v.cantouch&&!/HTML|BODY/.test(x.win[0].nodeName)&&(x.win.attr("tabindex")||x.win.attr({tabindex:g++}),x.win.focus(function(A){y=x.getTarget(A).id||true;x.hasfocus=true;x.canshowonmouseevent&&x.noticeCursor()}),x.win.blur(function(){y=false;x.hasfocus=false}),x.win.mouseenter(function(A){k=x.getTarget(A).id||true;x.hasmousefocus=true;x.canshowonmouseevent&&x.noticeCursor()}),x.win.mouseleave(function(){k=false;x.hasmousefocus=false}))}x.onkeypress=function(N){if(x.locked&&x.page.maxh==0){return true}var N=N?N:window.e,L=x.getTarget(N);if(L&&/INPUT|TEXTAREA|SELECT|OPTION/.test(L.nodeName)&&(!L.getAttribute("type")&&!L.type||!/submit|button|cancel/i.tp)){return true}if(x.hasfocus||x.hasmousefocus&&!y||x.ispage&&!y&&!k){var L=N.keyCode,A=N.ctrlKey||false;if(x.locked&&L!=27){return x.cancelEvent(N)}var M=false;switch(L){case 38:case 63233:x.doScrollBy(72);M=true;break;case 40:case 63235:x.doScrollBy(-72);M=true;break;case 37:case 63232:x.railh&&(A?x.doScrollLeft(0):x.doScrollLeftBy(72),M=true);break;case 39:case 63234:x.railh&&(A?x.doScrollLeft(x.page.maxw):x.doScrollLeftBy(-72),M=true);break;case 33:case 63276:x.doScrollBy(x.view.h);M=true;break;case 34:case 63277:x.doScrollBy(-x.view.h);M=true;break;case 36:case 63273:x.railh&&A?x.doScrollPos(0,0):x.doScrollTo(0);M=true;break;case 35:case 63275:x.railh&&A?x.doScrollPos(x.page.maxw,x.page.maxh):x.doScrollTo(x.page.maxh);M=true;break;case 32:x.opt.spacebarenabled&&(x.doScrollBy(-x.view.h),M=true);break;case 27:x.zoomactive&&(x.doZoom(),M=true)}if(M){return x.cancelEvent(N)}}};x.opt.enablekeyboard&&x.bind(document,v.isopera&&!v.isopera12?"keypress":"keydown",x.onkeypress);x.bind(window,"resize",x.resize);x.bind(window,"orientationchange",x.resize);x.bind(window,"load",x.resize);if(v.ischrome&&!x.ispage&&!x.haswrapper){var C=x.win.attr("style"),H=parseFloat(x.win.css("width"))+1;x.win.css("width",H);x.synched("chromefix",function(){x.win.attr("style",C)})}x.onAttributeChange=function(){x.lazyResize()};if(!x.ispage&&!x.haswrapper){"WebKitMutationObserver" in window?(x.observer=new WebKitMutationObserver(function(A){A.forEach(x.onAttributeChange)}),x.observer.observe(x.win[0],{attributes:true,subtree:false})):(x.bind(x.win,v.isie&&!v.isie9?"propertychange":"DOMAttrModified",x.onAttributeChange),v.isie9&&x.win[0].attachEvent("onpropertychange",x.onAttributeChange))}!x.ispage&&x.opt.boxzoom&&x.bind(window,"resize",x.resizeZoom);x.istextarea&&x.bind(x.win,"mouseup",x.resize);x.resize()}if(this.doc[0].nodeName=="IFRAME"){var z=function(){x.iframexd=false;try{var M="contentDocument" in this?this.contentDocument:this.contentWindow.document}catch(L){x.iframexd=true,M=false}if(x.iframexd){return"console" in window&&console.log("NiceScroll error: policy restriced iframe"),true}x.forcescreen=true;if(x.isiframe){x.iframe={doc:h(M),html:x.doc.contents().find("html")[0],body:x.doc.contents().find("body")[0]},x.getContentSize=function(){return{w:Math.max(x.iframe.html.scrollWidth,x.iframe.body.scrollWidth),h:Math.max(x.iframe.html.scrollHeight,x.iframe.body.scrollHeight)}},x.docscroll=h(x.iframe.body)}if(!v.isios&&x.opt.iframeautoresize&&!x.isiframe){x.win.scrollTop(0);x.doc.height("");var A=Math.max(M.getElementsByTagName("html")[0].scrollHeight,M.body.scrollHeight);x.doc.height(A)}x.resize();v.isie7&&x.css(h(x.iframe.html),{"overflow-y":"hidden"});x.css(h(x.iframe.body),{"overflow-y":"hidden"});"contentWindow" in this?x.bind(this.contentWindow,"scroll",x.onscroll):x.bind(M,"scroll",x.onscroll);x.opt.enablemousewheel&&x.bind(M,"mousewheel",x.onmousewheel);x.opt.enablekeyboard&&x.bind(M,v.isopera?"keypress":"keydown",x.onkeypress);if(v.cantouch||x.opt.touchbehavior){x.bind(M,"mousedown",x.onmousedown),x.bind(M,"mousemove",function(N){x.onmousemove(N,true)}),v.cursorgrabvalue&&x.css(h(M.body),{cursor:v.cursorgrabvalue})}x.bind(M,"mouseup",x.onmouseup);x.zoom&&(x.opt.dblclickzoom&&x.bind(M,"dblclick",x.doZoom),x.ongesturezoom&&x.bind(M,"gestureend",x.ongesturezoom))};this.doc[0].readyState&&this.doc[0].readyState=="complete"&&setTimeout(function(){z.call(x.doc[0],false)},500);x.bind(this.doc,"load",z)}};this.showCursor=function(A,z){if(x.cursortimeout){clearTimeout(x.cursortimeout),x.cursortimeout=0}if(x.rail){if(x.autohidedom){x.autohidedom.stop().css({opacity:x.opt.cursoropacitymax}),x.cursoractive=true}if(typeof A!="undefined"&&A!==false){x.scroll.y=Math.round(A*1/x.scrollratio.y)}if(typeof z!="undefined"){x.scroll.x=Math.round(z*1/x.scrollratio.x)}x.cursor.css({height:x.cursorheight,top:x.scroll.y});if(x.cursorh){!x.rail.align&&x.rail.visibility?x.cursorh.css({width:x.cursorwidth,left:x.scroll.x+x.rail.width}):x.cursorh.css({width:x.cursorwidth,left:x.scroll.x}),x.cursoractive=true}x.zoom&&x.zoom.stop().css({opacity:x.opt.cursoropacitymax})}};this.hideCursor=function(z){if(!x.cursortimeout&&x.rail&&x.autohidedom){x.cursortimeout=setTimeout(function(){if(!x.rail.active||!x.showonmouseevent){x.autohidedom.stop().animate({opacity:x.opt.cursoropacitymin}),x.zoom&&x.zoom.stop().animate({opacity:x.opt.cursoropacitymin}),x.cursoractive=false}x.cursortimeout=0},z||400)}};this.noticeCursor=function(B,A,z){x.showCursor(A,z);x.rail.active||x.hideCursor(B)};this.getContentSize=x.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:x.haswrapper?function(){return{w:x.doc.outerWidth()+parseInt(x.win.css("paddingLeft"))+parseInt(x.win.css("paddingRight")),h:x.doc.outerHeight()+parseInt(x.win.css("paddingTop"))+parseInt(x.win.css("paddingBottom"))}}:function(){return{w:x.docscroll[0].scrollWidth,h:x.docscroll[0].scrollHeight}};this.onResize=function(D,B){if(!x.win){return false}if(!x.haswrapper&&!x.ispage){if(x.win.css("display")=="none"){return x.visibility&&x.hideRail().hideRailHr(),false}else{!x.hidden&&!x.visibility&&x.showRail().showRailHr()}}var A=x.page.maxh,C=x.page.maxw,z=x.view.w;x.view={w:x.ispage?x.win.width():parseInt(x.win[0].clientWidth),h:x.ispage?x.win.height():parseInt(x.win[0].clientHeight)};x.page=B?B:x.getContentSize();x.page.maxh=Math.max(0,x.page.h-x.view.h);x.page.maxw=Math.max(0,x.page.w-x.view.w);if(x.page.maxh==A&&x.page.maxw==C&&x.view.w==z){if(x.ispage){return x}else{A=x.win.offset();if(x.lastposition&&(C=x.lastposition,C.top==A.top&&C.left==A.left)){return x}x.lastposition=A}}x.page.maxh==0?(x.hideRail(),x.scrollvaluemax=0,x.scroll.y=0,x.scrollratio.y=0,x.cursorheight=0,x.setScrollTop(0),x.rail.scrollable=false):x.rail.scrollable=true;x.page.maxw==0?(x.hideRailHr(),x.scrollvaluemaxw=0,x.scroll.x=0,x.scrollratio.x=0,x.cursorwidth=0,x.setScrollLeft(0),x.railh.scrollable=false):x.railh.scrollable=true;x.locked=x.page.maxh==0&&x.page.maxw==0;if(x.locked){return x.ispage||x.updateScrollBar(x.view),false}!x.hidden&&!x.visibility?x.showRail().showRailHr():!x.hidden&&!x.railh.visibility&&x.showRailHr();x.istextarea&&x.win.css("resize")&&x.win.css("resize")!="none"&&(x.view.h-=20);x.ispage||x.updateScrollBar(x.view);x.cursorheight=Math.min(x.view.h,Math.round(x.view.h*(x.view.h/x.page.h)));x.cursorheight=Math.max(x.opt.cursorminheight,x.cursorheight);x.cursorwidth=Math.min(x.view.w,Math.round(x.view.w*(x.view.w/x.page.w)));x.cursorwidth=Math.max(x.opt.cursorminheight,x.cursorwidth);x.scrollvaluemax=x.view.h-x.cursorheight-x.cursor.hborder;if(x.railh){x.railh.width=x.page.maxh>0?x.view.w-x.rail.width:x.view.w,x.scrollvaluemaxw=x.railh.width-x.cursorwidth-x.cursorh.wborder}x.scrollratio={x:x.page.maxw/x.scrollvaluemaxw,y:x.page.maxh/x.scrollvaluemax};x.getScrollTop()>x.page.maxh?x.doScroll(x.page.maxh):(x.scroll.y=Math.round(x.getScrollTop()*(1/x.scrollratio.y)),x.scroll.x=Math.round(x.getScrollLeft()*(1/x.scrollratio.x)),x.cursoractive&&x.noticeCursor());x.scroll.y&&x.getScrollTop()==0&&x.doScrollTo(Math.floor(x.scroll.y*x.scrollratio.y));return x};this.resize=function(){x.delayed("resize",x.onResize,30);return x};this.lazyResize=function(){x.delayed("resize",x.resize,250)};this._bind=function(C,A,z,B){x.events.push({e:C,n:A,f:z,b:B});C.addEventListener?C.addEventListener(A,z,B||false):C.attachEvent?C.attachEvent("on"+A,z):C["on"+A]=z};this.bind=function(D,C,B,A){var z="jquery" in D?D[0]:D;z.addEventListener?(v.cantouch&&/mouseup|mousedown|mousemove/.test(C)&&x._bind(z,C=="mousedown"?"touchstart":C=="mouseup"?"touchend":"touchmove",function(E){if(E.touches){if(E.touches.length<2){var F=E.touches.length?E.touches[0]:E;F.original=E;B.call(this,F)}}else{if(E.changedTouches){F=E.changedTouches[0],F.original=E,B.call(this,F)}}},A||false),x._bind(z,C,B,A||false),C=="mousewheel"&&x._bind(z,"DOMMouseScroll",B,A||false),v.cantouch&&C=="mouseup"&&x._bind(z,"touchcancel",B,A||false)):x._bind(z,C,function(E){if((E=E||window.event||false)&&E.srcElement){E.target=E.srcElement}return B.call(z,E)===false||A===false?x.cancelEvent(E):true})};this._unbind=function(z,C,A,B){z.removeEventListener?z.removeEventListener(C,A,B):z.detachEvent?z.detachEvent("on"+C,A):z["on"+C]=false};this.unbindAll=function(){for(var A=0;A<x.events.length;A++){var z=x.events[A];x._unbind(z.e,z.n,z.f,z.b)}};this.cancelEvent=function(z){z=z.original?z.original:z?z:window.event||false;if(!z){return false}z.preventDefault&&z.preventDefault();z.stopPropagation&&z.stopPropagation();z.preventManipulation&&z.preventManipulation();z.cancelBubble=true;z.cancel=true;return z.returnValue=false};this.stopPropagation=function(z){z=z.original?z.original:z?z:window.event||false;if(!z){return false}if(z.stopPropagation){return z.stopPropagation()}if(z.cancelBubble){z.cancelBubble=true}return false};this.showRail=function(){if(x.page.maxh!=0&&(x.ispage||x.win.css("display")!="none")){x.visibility=true,x.rail.visibility=true,x.rail.css("display","block")}return x};this.showRailHr=function(){if(!x.railh){return x}if(x.page.maxw!=0&&(x.ispage||x.win.css("display")!="none")){x.railh.visibility=true,x.railh.css("display","block")}return x};this.hideRail=function(){x.visibility=false;x.rail.visibility=false;x.rail.css("display","none");return x};this.hideRailHr=function(){if(!x.railh){return x}x.railh.visibility=false;x.railh.css("display","none");return x};this.show=function(){x.hidden=false;x.locked=false;return x.showRail().showRailHr()};this.hide=function(){x.hidden=true;x.locked=true;return x.hideRail().hideRailHr()};this.remove=function(){x.doZoomOut();x.unbindAll();x.observer!==false&&x.observer.disconnect();x.events=[];if(x.cursor){x.cursor.remove(),x.cursor=null}if(x.cursorh){x.cursorh.remove(),x.cursorh=null}if(x.rail){x.rail.remove(),x.rail=null}if(x.railh){x.railh.remove(),x.railh=null}if(x.zoom){x.zoom.remove(),x.zoom=null}for(var A=0;A<x.saved.css.length;A++){var z=x.saved.css[A];z[0].css(z[1],typeof z[2]=="undefined"?"":z[2])}x.saved=false;x.me.data("__nicescroll","");x.me=null;x.doc=null;x.docscroll=null;x.win=null;return x};this.scrollstart=function(z){this.onscrollstart=z;return x};this.scrollend=function(z){this.onscrollend=z;return x};this.scrollcancel=function(z){this.onscrollcancel=z;return x};this.zoomin=function(z){this.onzoomin=z;return x};this.zoomout=function(z){this.onzoomout=z;return x};this.isScrollable=function(z){for(z=z.target?z.target:z;z&&z.nodeType==1&&!/BODY|HTML/.test(z.nodeName);){var A=h(z);if(/scroll|auto/.test(A.css("overflowY")||A.css("overflowX")||A.css("overflow")||"")){return z.clientHeight!=z.scrollHeight}z=z.parentNode?z.parentNode:false}return false};this.onmousewheel=function(z){if(x.locked){return true}if(!x.rail.scrollable){return x.railh&&x.railh.scrollable?x.onmousewheelhr(z):true}if(x.opt.preservenativescrolling&&x.checkarea){x.checkarea=false,x.nativescrollingarea=x.isScrollable(z)}if(x.nativescrollingarea){return true}if(x.locked){return x.cancelEvent(z)}if(x.rail.drag){return x.cancelEvent(z)}t(z,false);return x.cancelEvent(z)};this.onmousewheelhr=function(z){if(x.locked||!x.railh.scrollable){return true}if(x.opt.preservenativescrolling&&x.checkarea){x.checkarea=false,x.nativescrollingarea=x.isScrollable(z)}if(x.nativescrollingarea){return true}if(x.locked){return x.cancelEvent(z)}if(x.rail.drag){return x.cancelEvent(z)}t(z,true);return x.cancelEvent(z)};this.stop=function(){x.cancelScroll();x.scrollmon&&x.scrollmon.stop();x.cursorfreezed=false;x.scroll.y=Math.round(x.getScrollTop()*(1/x.scrollratio.y));x.noticeCursor();return x};this.getTransitionSpeed=function(A){var z=Math.round(x.opt.scrollspeed*10),A=Math.min(z,Math.round(A/20*x.opt.scrollspeed));return A>20?A:0};x.opt.smoothscroll?x.ishwscroll&&v.hastransition&&x.opt.usetransition?(this.prepareTransition=function(C,B){var A=B?C>20?C:0:x.getTransitionSpeed(C),z=A?v.prefixstyle+"transform "+A+"ms ease-out":"";if(!x.lasttransitionstyle||x.lasttransitionstyle!=z){x.lasttransitionstyle=z,x.doc.css(v.transitionstyle,z)}return A},this.doScrollLeft=function(B,A){var z=x.scrollrunning?x.newscrolly:x.getScrollTop();x.doScrollPos(B,z,A)},this.doScrollTop=function(B,A){var z=x.scrollrunning?x.newscrollx:x.getScrollLeft();x.doScrollPos(z,B,A)},this.doScrollPos=function(D,C,B){var A=x.getScrollTop(),z=x.getScrollLeft();((x.newscrolly-A)*(C-A)<0||(x.newscrollx-z)*(D-z)<0)&&x.cancelScroll();x.newscrolly=C;x.newscrollx=D;x.newscrollspeed=B||false;if(x.timer){return false}x.timer=setTimeout(function(){var H=x.getScrollTop(),G=x.getScrollLeft(),F,E;F=D-G;E=C-H;F=Math.round(Math.sqrt(Math.pow(F,2)+Math.pow(E,2)));F=x.prepareTransition(x.newscrollspeed?x.newscrollspeed:F);x.timerscroll&&x.timerscroll.tm&&clearInterval(x.timerscroll.tm);if(F>0){!x.scrollrunning&&x.onscrollstart&&x.onscrollstart.call(x,{type:"scrollstart",current:{x:G,y:H},request:{x:D,y:C},end:{x:x.newscrollx,y:x.newscrolly},speed:F});if(v.transitionend){if(!x.scrollendtrapped){x.scrollendtrapped=true,x.bind(x.doc,v.transitionend,x.onScrollEnd,false)}}else{x.scrollendtrapped&&clearTimeout(x.scrollendtrapped),x.scrollendtrapped=setTimeout(x.onScrollEnd,F)}x.timerscroll={bz:new BezierClass(H,x.newscrolly,F,0,0,0.58,1),bh:new BezierClass(G,x.newscrollx,F,0,0,0.58,1)};if(!x.cursorfreezed){x.timerscroll.tm=setInterval(function(){x.showCursor(x.getScrollTop(),x.getScrollLeft())},60)}}x.synched("doScroll-set",function(){x.timer=0;if(x.scrollendtrapped){x.scrollrunning=true}x.setScrollTop(x.newscrolly);x.setScrollLeft(x.newscrollx);if(!x.scrollendtrapped){x.onScrollEnd()}})},50)},this.cancelScroll=function(){if(!x.scrollendtrapped){return true}var A=x.getScrollTop(),z=x.getScrollLeft();x.scrollrunning=false;v.transitionend||clearTimeout(v.transitionend);x.scrollendtrapped=false;x._unbind(x.doc,v.transitionend,x.onScrollEnd);x.prepareTransition(0);x.setScrollTop(A);x.railh&&x.setScrollLeft(z);x.timerscroll&&x.timerscroll.tm&&clearInterval(x.timerscroll.tm);x.timerscroll=false;x.cursorfreezed=false;x.showCursor(A,z);return x},this.onScrollEnd=function(){x.scrollendtrapped&&x._unbind(x.doc,v.transitionend,x.onScrollEnd);x.scrollendtrapped=false;x.prepareTransition(0);x.timerscroll&&x.timerscroll.tm&&clearInterval(x.timerscroll.tm);x.timerscroll=false;var A=x.getScrollTop(),z=x.getScrollLeft();x.setScrollTop(A);x.railh&&x.setScrollLeft(z);x.noticeCursor(false,A,z);x.cursorfreezed=false;if(A<0){A=0}else{if(A>x.page.maxh){A=x.page.maxh}}if(z<0){z=0}else{if(z>x.page.maxw){z=x.page.maxw}}if(A!=x.newscrolly||z!=x.newscrollx){return x.doScrollPos(z,A,x.opt.snapbackspeed)}x.onscrollend&&x.scrollrunning&&x.onscrollend.call(x,{type:"scrollend",current:{x:z,y:A},end:{x:x.newscrollx,y:x.newscrolly}});x.scrollrunning=false}):(this.doScrollLeft=function(A){var z=x.scrollrunning?x.newscrolly:x.getScrollTop();x.doScrollPos(A,z)},this.doScrollTop=function(A){var z=x.scrollrunning?x.newscrollx:x.getScrollLeft();x.doScrollPos(z,A)},this.doScrollPos=function(H,F){function E(){if(x.cancelAnimationFrame){return true}x.scrollrunning=true;if(z=1-z){return x.timer=f(E)||1}var L=0,I=sy=x.getScrollTop();if(x.dst.ay){var I=x.bzscroll?x.dst.py+x.bzscroll.getNow()*x.dst.ay:x.newscrolly,J=I-sy;if(J<0&&I<x.newscrolly||J>0&&I>x.newscrolly){I=x.newscrolly}x.setScrollTop(I);I==x.newscrolly&&(L=1)}else{L=1}var K=sx=x.getScrollLeft();if(x.dst.ax){K=x.bzscroll?x.dst.px+x.bzscroll.getNow()*x.dst.ax:x.newscrollx;J=K-sx;if(J<0&&K<x.newscrollx||J>0&&K>x.newscrollx){K=x.newscrollx}x.setScrollLeft(K);K==x.newscrollx&&(L+=1)}else{L+=1}if(L==2){x.timer=0;x.cursorfreezed=false;x.bzscroll=false;x.scrollrunning=false;if(I<0){I=0}else{if(I>x.page.maxh){I=x.page.maxh}}if(K<0){K=0}else{if(K>x.page.maxw){K=x.page.maxw}}K!=x.newscrollx||I!=x.newscrolly?x.doScrollPos(K,I):x.onscrollend&&x.onscrollend.call(x,{type:"scrollend",current:{x:sx,y:sy},end:{x:x.newscrollx,y:x.newscrolly}})}else{x.timer=f(E)||1}}F=typeof F=="undefined"||F===false?x.getScrollTop(true):F;if(x.timer&&x.newscrolly==F&&x.newscrollx==H){return true}x.timer&&c(x.timer);x.timer=0;var G=x.getScrollTop(),D=x.getScrollLeft();((x.newscrolly-G)*(F-G)<0||(x.newscrollx-D)*(H-D)<0)&&x.cancelScroll();x.newscrolly=F;x.newscrollx=H;if(!x.bouncescroll||!x.rail.visibility){if(x.newscrolly<0){x.newscrolly=0}else{if(x.newscrolly>x.page.maxh){x.newscrolly=x.page.maxh}}}if(!x.bouncescroll||!x.railh.visibility){if(x.newscrollx<0){x.newscrollx=0}else{if(x.newscrollx>x.page.maxw){x.newscrollx=x.page.maxw}}}x.dst={};x.dst.x=H-D;x.dst.y=F-G;x.dst.px=D;x.dst.py=G;var C=Math.round(Math.sqrt(Math.pow(x.dst.x,2)+Math.pow(x.dst.y,2)));x.dst.ax=x.dst.x/C;x.dst.ay=x.dst.y/C;var B=0,A=C;if(x.dst.x==0){B=G,A=F,x.dst.ay=1,x.dst.py=0}else{if(x.dst.y==0){B=D,A=H,x.dst.ax=1,x.dst.px=0}}C=x.getTransitionSpeed(C);x.bzscroll=C>0?x.bzscroll?x.bzscroll.update(A,C):new BezierClass(B,A,C,0,1,0,1):false;if(!x.timer){(G==x.page.maxh&&F>=x.page.maxh||D==x.page.maxw&&H>=x.page.maxw)&&x.checkContentSize();var z=1;x.cancelAnimationFrame=false;x.timer=1;x.onscrollstart&&!x.scrollrunning&&x.onscrollstart.call(x,{type:"scrollstart",current:{x:D,y:G},request:{x:H,y:F},end:{x:x.newscrollx,y:x.newscrolly},speed:C});E();(G==x.page.maxh&&F>=G||D==x.page.maxw&&H>=D)&&x.checkContentSize();x.noticeCursor()}},this.cancelScroll=function(){x.timer&&c(x.timer);x.timer=0;x.bzscroll=false;x.scrollrunning=false;return x}):(this.doScrollLeft=function(B,A){var z=x.getScrollTop();x.doScrollPos(B,z,A)},this.doScrollTop=function(B,A){var z=x.getScrollLeft();x.doScrollPos(z,B,A)},this.doScrollPos=function(C,A){var z=C>x.page.maxw?x.page.maxw:C;z<0&&(z=0);var B=A>x.page.maxh?x.page.maxh:A;B<0&&(B=0);x.synched("scroll",function(){x.setScrollTop(B);x.setScrollLeft(z)})},this.cancelScroll=function(){});this.doScrollBy=function(C,A){var B=0,B=A?Math.floor((x.scroll.y-C)*x.scrollratio.y):(x.timer?x.newscrolly:x.getScrollTop(true))-C;if(x.bouncescroll){var z=Math.round(x.view.h/2);B<-z?B=-z:B>x.page.maxh+z&&(B=x.page.maxh+z)}x.cursorfreezed=false;py=x.getScrollTop(true);if(B<0&&py<=0){return x.noticeCursor()}else{if(B>x.page.maxh&&py>=x.page.maxh){return x.checkContentSize(),x.noticeCursor()}}x.doScrollTop(B)};this.doScrollLeftBy=function(C,A){var B=0,B=A?Math.floor((x.scroll.x-C)*x.scrollratio.x):(x.timer?x.newscrollx:x.getScrollLeft(true))-C;if(x.bouncescroll){var z=Math.round(x.view.w/2);B<-z?B=-z:B>x.page.maxw+z&&(B=x.page.maxw+z)}x.cursorfreezed=false;px=x.getScrollLeft(true);if(B<0&&px<=0){return x.noticeCursor()}else{if(B>x.page.maxw&&px>=x.page.maxw){return x.noticeCursor()}}x.doScrollLeft(B)};this.doScrollTo=function(A,z){z&&Math.round(A*x.scrollratio.y);x.cursorfreezed=false;x.doScrollTop(A)};this.checkContentSize=function(){var z=x.getContentSize();(z.h!=x.page.h||z.w!=x.page.w)&&x.resize(false,z)};x.onscroll=function(){x.rail.drag||x.cursorfreezed||x.synched("scroll",function(){x.scroll.y=Math.round(x.getScrollTop()*(1/x.scrollratio.y));if(x.railh){x.scroll.x=Math.round(x.getScrollLeft()*(1/x.scrollratio.x))}x.noticeCursor()})};x.bind(x.docscroll,"scroll",x.onscroll);this.doZoomIn=function(D){if(!x.zoomactive){x.zoomactive=true;x.zoomrestore={style:{}};var B="position,top,left,zIndex,backgroundColor,marginTop,marginBottom,marginLeft,marginRight".split(","),C=x.win[0].style,A;for(A in B){var z=B[A];x.zoomrestore.style[z]=typeof C[z]!="undefined"?C[z]:""}x.zoomrestore.style.width=x.win.css("width");x.zoomrestore.style.height=x.win.css("height");x.zoomrestore.padding={w:x.win.outerWidth()-x.win.width(),h:x.win.outerHeight()-x.win.height()};if(v.isios4){x.zoomrestore.scrollTop=h(window).scrollTop(),h(window).scrollTop(0)}x.win.css({position:v.isios4?"absolute":"fixed",top:0,left:0,"z-index":x.opt.zindex+100,margin:"0px"});B=x.win.css("backgroundColor");(B==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(B))&&x.win.css("backgroundColor","#fff");x.rail.css({"z-index":x.opt.zindex+110});x.zoom.css({"z-index":x.opt.zindex+112});x.zoom.css("backgroundPosition","0px -18px");x.resizeZoom();x.onzoomin&&x.onzoomin.call(x);return x.cancelEvent(D)}};this.doZoomOut=function(z){if(x.zoomactive){return x.zoomactive=false,x.win.css("margin",""),x.win.css(x.zoomrestore.style),v.isios4&&h(window).scrollTop(x.zoomrestore.scrollTop),x.rail.css({"z-index":x.ispage?x.opt.zindex:x.opt.zindex+2}),x.zoom.css({"z-index":x.opt.zindex}),x.zoomrestore=false,x.zoom.css("backgroundPosition","0px 0px"),x.onResize(),x.onzoomout&&x.onzoomout.call(x),x.cancelEvent(z)}};this.doZoom=function(z){return x.zoomactive?x.doZoomOut(z):x.doZoomIn(z)};this.resizeZoom=function(){if(x.zoomactive){var z=x.getScrollTop();x.win.css({width:h(window).width()-x.zoomrestore.padding.w+"px",height:h(window).height()-x.zoomrestore.padding.h+"px"});x.onResize();x.setScrollTop(Math.min(x.page.maxh,z))}};this.init();h.nicescroll.push(this)},i=function(q){var r=this;this.nc=q;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=false;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return +new Date};this.reset=function(u,t){r.stop();var s=r.time();r.steptime=0;r.lasttime=s;r.speedx=0;r.speedy=0;r.lastx=u;r.lasty=t;r.lastscrollx=-1;r.lastscrolly=-1};this.update=function(w,u){var s=r.time();r.steptime=s-r.lasttime;r.lasttime=s;var s=u-r.lasty,t=w-r.lastx,v=r.nc.getScrollTop(),x=r.nc.getScrollLeft();v+=s;x+=t;r.snapx=x<0||x>r.nc.page.maxw;r.snapy=v<0||v>r.nc.page.maxh;r.speedx=t;r.speedy=s;r.lastx=w;r.lasty=u};this.stop=function(){r.nc.unsynched("domomentum2d");r.timer&&clearTimeout(r.timer);r.timer=0;r.lastscrollx=-1;r.lastscrolly=-1};this.doSnapy=function(u,t){var s=false;if(t<0){t=0,s=true}else{if(t>r.nc.page.maxh){t=r.nc.page.maxh,s=true}}if(u<0){u=0,s=true}else{if(u>r.nc.page.maxw){u=r.nc.page.maxw,s=true}}s&&r.nc.doScrollPos(u,t,r.nc.opt.snapbackspeed)};this.doMomentum=function(B){var w=r.time(),C=B?w+B:r.lasttime,B=r.nc.getScrollLeft(),v=r.nc.getScrollTop(),A=r.nc.page.maxh,t=r.nc.page.maxw;r.speedx=t>0?Math.min(60,r.speedx):0;r.speedy=A>0?Math.min(60,r.speedy):0;C=C&&w-C<=50;if(v<0||v>A||B<0||B>t){C=false}B=r.speedx&&C?r.speedx:false;if(r.speedy&&C&&r.speedy||B){var s=Math.max(16,r.steptime);s>50&&(B=s/50,r.speedx*=B,r.speedy*=B,s=50);r.demulxy=0;r.lastscrollx=r.nc.getScrollLeft();r.chkx=r.lastscrollx;r.lastscrolly=r.nc.getScrollTop();r.chky=r.lastscrolly;var z=r.lastscrollx,u=r.lastscrolly,x=function(){var d=r.time()-w>600?0.04:0.02;if(r.speedx&&(z=Math.floor(r.lastscrollx-r.speedx*(1-r.demulxy)),r.lastscrollx=z,z<0||z>t)){d=0.1}if(r.speedy&&(u=Math.floor(r.lastscrolly-r.speedy*(1-r.demulxy)),r.lastscrolly=u,u<0||u>A)){d=0.1}r.demulxy=Math.min(1,r.demulxy+d);r.nc.synched("domomentum2d",function(){if(r.speedx){r.nc.getScrollLeft()!=r.chkx&&r.stop(),r.chkx=z,r.nc.setScrollLeft(z)}if(r.speedy){r.nc.getScrollTop()!=r.chky&&r.stop(),r.chky=u,r.nc.setScrollTop(u)}r.timer||(r.nc.hideCursor(),r.doSnapy(z,u))});r.demulxy<1?r.timer=setTimeout(x,s):(r.stop(),r.nc.hideCursor(),r.doSnapy(z,u))};x()}else{r.doSnapy(r.nc.getScrollLeft(),r.nc.getScrollTop())}}},n=h.fn.scrollTop;h.cssHooks.pageYOffset={get:function(d){var q=h.data(d,"__nicescroll")||false;return q&&q.ishwscroll?q.getScrollTop():n.call(d)},set:function(d,r){var q=h.data(d,"__nicescroll")||false;q&&q.ishwscroll?q.setScrollTop(parseInt(r)):n.call(d,r);return this}};h.fn.scrollTop=function(d){if(typeof d=="undefined"){var q=this[0]?h.data(this[0],"__nicescroll")||false:false;return q&&q.ishwscroll?q.getScrollTop():n.call(this)}else{return this.each(function(){var r=h.data(this,"__nicescroll")||false;r&&r.ishwscroll?r.setScrollTop(parseInt(d)):n.call(h(this),d)})}};var m=h.fn.scrollLeft;h.cssHooks.pageXOffset={get:function(d){var q=h.data(d,"__nicescroll")||false;return q&&q.ishwscroll?q.getScrollLeft():m.call(d)},set:function(d,r){var q=h.data(d,"__nicescroll")||false;q&&q.ishwscroll?q.setScrollLeft(parseInt(r)):m.call(d,r);return this}};h.fn.scrollLeft=function(d){if(typeof d=="undefined"){var q=this[0]?h.data(this[0],"__nicescroll")||false:false;return q&&q.ishwscroll?q.getScrollLeft():m.call(this)}else{return this.each(function(){var r=h.data(this,"__nicescroll")||false;r&&r.ishwscroll?r.setScrollLeft(parseInt(d)):m.call(h(this),d)})}};var l=function(d){var r=this;this.length=0;this.name="nicescrollarray";this.each=function(t){for(var s=0;s<r.length;s++){t.call(r[s])}return r};this.push=function(s){r[r.length]=s;r.length++};this.eq=function(s){return r[s]};if(d){for(a=0;a<d.length;a++){var q=h.data(d[a],"__nicescroll")||false;q&&(this[this.length]=q,this.length++)}}return this};(function(s,t,r){for(var q=0;q<t.length;q++){r(s,t[q])}})(l.prototype,"show,hide,onResize,resize,remove,stop,doScrollPos".split(","),function(q,r){q[r]=function(){var s=arguments;return this.each(function(){this[r].apply(this,s)})}});h.fn.getNiceScroll=function(d){return typeof d=="undefined"?new l(this):h.data(this[d],"__nicescroll")||false};h.extend(h.expr[":"],{nicescroll:function(d){return h.data(d,"__nicescroll")?true:false}});h.fn.niceScroll=function(d,s){typeof s=="undefined"&&typeof d=="object"&&!("jquery" in d)&&(s=d,d=false);var r=new l;typeof s=="undefined"&&(s={});if(d){s.doc=h(d),s.win=h(this)}var q=!("doc" in s);if(!q&&!("win" in s)){s.win=h(this)}this.each(function(){var t=h(this).data("__nicescroll")||false;if(!t){s.doc=q?h(this):s.doc,t=new o(s,h(this)),h(this).data("__nicescroll",t)}r.push(t)});return r.length==1?r[0]:r};window.NiceScroll={getjQuery:function(){return h}};if(!h.nicescroll){h.nicescroll=new l}})(jQuery);